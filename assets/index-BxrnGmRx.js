(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();const x=document.querySelector("#name"),v=document.querySelector("#email"),S=document.querySelector("#age"),y=document.querySelector("#consult"),L=document.querySelector("#sintoms"),u=document.querySelector(".formulario"),f=document.querySelector("#paciente-ingresado"),h=document.querySelector(".titulo-lista"),N=document.querySelector(".texto-lista");x.addEventListener("input",c);v.addEventListener("input",c);S.addEventListener("input",c);y.addEventListener("input",c);L.addEventListener("input",c);u.addEventListener("submit",q);let p=!1;const i={id:O(),name:"",email:"",age:"",consult:"",sintoms:""};f.addEventListener("click",e=>{if(e.target.classList.contains("editar-btn")){const t=e.target.getAttribute("data-id");w(t)}if(e.target.classList.contains("eliminar-btn")){const t=e.target.getAttribute("data-id");$(t)}});function c(e){if(e.target.value.trim()===""){d(e.target),g("Este campo es obligatorio",e.target.parentElement);return}if(e.target.id==="email"&&!C(e.target)){d(e.target),g("Email invalido",e.target.parentElement);return}i[e.target.id]=e.target.value.trim(),d(e.target)}function q(e){if(e.preventDefault(),d(e.target),!i.name||!i.email||!i.age||!i.consult||!i.sintoms){g("Por favor, complete todos los campos.",u);return}p?(A(),b("Editado Correctamente"),p=!1,E()):(i.id||(i.id=O()),I(),b("Paciente agregado")),console.log(i),l(),M(),document.querySelector("#btn-submit").textContent="Agregar"}function P(e){const{name:t,email:a,age:o,consult:n,sintoms:r,id:s}=e,m=document.createElement("div");m.classList.add("info-paciente"),m.innerHTML=`
    <p><span class="text-indigo-700 font-bold">Nombre:</span> ${t}</p>
    <p><span class="text-indigo-700 font-bold">Email:</span> ${a}</p>
    <p><span class="text-indigo-700 font-bold">Edad:</span> ${o}</p>
    <p><span class="text-indigo-700 font-bold">Motivo de consulta:</span> ${n}</p>
    <p><span class="text-indigo-700 font-bold">Sintomas:</span> ${r}</p>
    <div class="buttons flex justify-evenly mt-3">
      <button class="editar-btn text-white bg-blue-500 border-blue-700 rounded-md w-auto px-3 hover:bg-blue-900 hover:cursor-pointer" data-id="${s}">Editar</button>
      <button class="eliminar-btn text-white bg-red-500 border-red-700 rounded-md w-auto px-3 hover:bg-red-900 hover:cursor-pointer" data-id="${s}">Eliminar</button>
    </div>
  `,f.appendChild(m),h.innerHTML='<p class="text-2xl">Lista de <span class="font-bold text-indigo-700">Pacientes</span>',N.style.display="none"}function I(){let e=JSON.parse(localStorage.getItem("pacientes"))||[];e=e.filter(t=>t.id!==i.id),e.push({...i}),localStorage.setItem("pacientes",JSON.stringify(e)),l()}function l(){let e=JSON.parse(localStorage.getItem("pacientes"))||[];e=e.filter(t=>t.id!==""),f.innerHTML="",e.forEach(t=>{P(t)})}function w(e){const a=(JSON.parse(localStorage.getItem("pacientes"))||[]).find(o=>o.id===e);a?(x.value=a.name,v.value=a.email,S.value=a.age,y.value=a.consult,L.value=a.sintoms,p=!0,Object.assign(i,a),document.querySelector("#btn-submit").textContent="Guardar Cambios"):console.error("Paciente no encontrado")}function A(){let e=JSON.parse(localStorage.getItem("pacientes"))||[];e=e.map(t=>t.id===i.id?{...i}:t),localStorage.setItem("pacientes",JSON.stringify(e)),l()}function $(e){let t=JSON.parse(localStorage.getItem("pacientes"))||[];t=t.filter(a=>a.id!==e),localStorage.setItem("pacientes",JSON.stringify(t)),l(),t.length===0&&(h.innerHTML=`
    <h2 class="text-xl mt-0">No hay <span class="text-indigo-700 font-bold text-xl">Pacientes</span> en la lista</h2>
    <p class="texto-lista text-[15px] text-gray-400 font-light">Agrega un paciente</p>
    `)}function M(){u.reset(),E()}function E(){Object.assign(i,{id:"",name:"",email:"",age:"",consult:"",sintoms:""})}function O(){return Math.random().toString(36).substring(2)+Date.now()}function C(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e.value)}function d(e){const t=e.parentElement.querySelector(".alerta-error");t&&t.remove()}function g(e,t){const a=document.createElement("div");a.innerHTML=`
    <p class="alerta-error text-white px-1.5 py-0.5 uppercase text-xs font-bold bg-red-400 border-2 border-red-600 rounded-md w-auto mb-1">${e}</p>
  `,t.appendChild(a)}function b(e){const t=document.createElement("div");t.classList.add("alerta-exito","text-center","mb-2"),t.innerHTML=`
    <p class="bg-green-500 border-green-700 text-white uppercase w-auto px-2 rounded-md">${e}</p>
  `,u.appendChild(t),setTimeout(()=>{t&&t.remove()},3e3)}l();
