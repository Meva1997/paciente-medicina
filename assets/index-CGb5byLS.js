(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const v=document.querySelector("#name"),x=document.querySelector("#email"),S=document.querySelector("#age"),y=document.querySelector("#consult"),L=document.querySelector("#sintoms"),c=document.querySelector(".formulario"),f=document.querySelector("#paciente-ingresado"),h=document.querySelector(".titulo-lista"),q=document.querySelector(".texto-lista");v.addEventListener("input",l);x.addEventListener("input",l);S.addEventListener("input",l);y.addEventListener("input",l);L.addEventListener("input",l);c.addEventListener("submit",N);let p=!1;const r={id:O(),name:"",email:"",age:"",consult:"",sintoms:""};f.addEventListener("click",e=>{if(e.target.classList.contains("editar-btn")){const t=e.target.getAttribute("data-id");w(t)}if(e.target.classList.contains("eliminar-btn")){const t=e.target.getAttribute("data-id");$(t)}});function l(e){if(e.target.value.trim()===""){u(e.target),g("Este campo es obligatorio",e.target.parentElement);return}if(e.target.id==="email"&&!C(e.target)){u(e.target),g("Email invalido",e.target.parentElement);return}r[e.target.id]=e.target.value.trim(),u(e.target)}function N(e){if(e.preventDefault(),u(e.target),!r.name||!r.email||!r.age||!r.consult||!r.sintoms){g("Por favor, complete todos los campos.",c);const t=c.querySelector(".alerta-error");setTimeout(()=>{t&&t.remove()},3e3);return}p?(A(),b("Editado Correctamente"),p=!1,E()):(r.id||(r.id=O()),I(),b("Paciente agregado")),console.log(r),d(),M(),document.querySelector("#btn-submit").textContent="Agregar"}function P(e){const{name:t,email:a,age:i,consult:n,sintoms:o,id:s}=e,m=document.createElement("div");m.classList.add("info-paciente"),m.innerHTML=`
    <p><span class="text-indigo-700 font-bold">Nombre:</span> ${t}</p>
    <p><span class="text-indigo-700 font-bold">Email:</span> ${a}</p>
    <p><span class="text-indigo-700 font-bold">Edad:</span> ${i}</p>
    <p><span class="text-indigo-700 font-bold">Motivo de consulta:</span> ${n}</p>
    <p><span class="text-indigo-700 font-bold">Sintomas:</span> ${o}</p>
    <div class="buttons flex justify-evenly mt-3">
      <button class="editar-btn text-white bg-blue-500 border-blue-700 rounded-md w-auto px-3 hover:bg-blue-900 hover:cursor-pointer" data-id="${s}">Editar</button>
      <button class="eliminar-btn text-white bg-red-500 border-red-700 rounded-md w-auto px-3 hover:bg-red-900 hover:cursor-pointer" data-id="${s}">Eliminar</button>
    </div>
  `,f.appendChild(m),h.innerHTML='<p class="text-2xl">Lista de <span class="font-bold text-indigo-700">Pacientes</span>',q.style.display="none"}function I(){let e=JSON.parse(localStorage.getItem("pacientes"))||[];e=e.filter(t=>t.id!==r.id),e.push({...r}),localStorage.setItem("pacientes",JSON.stringify(e)),d()}function d(){let e=JSON.parse(localStorage.getItem("pacientes"))||[];e=e.filter(t=>t.id!==""),f.innerHTML="",e.forEach(t=>{P(t)})}function w(e){const a=(JSON.parse(localStorage.getItem("pacientes"))||[]).find(i=>i.id===e);a?(v.value=a.name,x.value=a.email,S.value=a.age,y.value=a.consult,L.value=a.sintoms,p=!0,Object.assign(r,a),document.querySelector("#btn-submit").textContent="Guardar Cambios"):console.error("Paciente no encontrado")}function A(){let e=JSON.parse(localStorage.getItem("pacientes"))||[];e=e.map(t=>t.id===r.id?{...r}:t),localStorage.setItem("pacientes",JSON.stringify(e)),d()}function $(e){let t=JSON.parse(localStorage.getItem("pacientes"))||[];t=t.filter(a=>a.id!==e),localStorage.setItem("pacientes",JSON.stringify(t)),d(),t.length===0&&(h.innerHTML=`
    <h2 class="text-xl mt-0">No hay <span class="text-indigo-700 font-bold text-xl">Pacientes</span> en la lista</h2>
    <p class="texto-lista text-[15px] text-gray-400 font-light">Agrega un paciente</p>
    `)}function M(){c.reset(),E()}function E(){Object.assign(r,{id:"",name:"",email:"",age:"",consult:"",sintoms:""})}function O(){return Math.random().toString(36).substring(2)+Date.now()}function C(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e.value)}function u(e){const t=e.parentElement.querySelector(".alerta-error");t&&t.remove()}function g(e,t){const a=document.createElement("div");a.innerHTML=`
    <p class="alerta-error text-white px-1.5 py-0.5 uppercase text-xs font-bold bg-red-400 border-2 border-red-600 rounded-md w-auto mb-1">${e}</p>
  `,t.appendChild(a)}function b(e){const t=document.createElement("div");t.classList.add("alerta-exito","text-center","mb-2"),t.innerHTML=`
    <p class="bg-green-500 border-green-700 text-white uppercase w-auto px-2 rounded-md">${e}</p>
  `,c.appendChild(t),setTimeout(()=>{t&&t.remove()},3e3)}d();
